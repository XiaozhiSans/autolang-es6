/**
 * autolang-es6 v1.4.3-es6 by @XiaozhiSans
 * WARN: This is an unofficial version of AutoLang(https://github.com/TheChuan1503/AutoLang/)
 * AutoLang by @TheChuan1503
 */
/**
 * AutoLang Lightweight i18n
 * VERSION 1.4.3
 * LICENSE MIT
 */
import*as jsyaml from"https://fastly.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.mjs";export const al={load(e=navigator.language,t=this.mode.HTML,l=(()=>{})){let a=(e,t)=>{let l=(t=t.trim()).split(";");if(l.forEach(((e,t)=>{l[t]=e.trim()})),""===l[l.length-1]&&l.splice(l.length-1,1),1==l.length&&-1==l[0].indexOf(":")){let e={};return e[l[0]]=!1,e}{let e={};return l.forEach((t=>{let l=t.split(":");l.forEach(((e,t)=>{l[t]=e.trim()})),e[l[0]]=l[1]})),e}};if(!al.lang.hasOwnProperty(e))if("default"==e)e=al.lang.default;else{if(-1!=e.indexOf("-"))var r=e.split("-")[0];else r=e;e=void 0!==al.lang.default_country&&al.lang.default_country.hasOwnProperty(r)?al.lang.default_country[r]:al.lang.default}var s=Object.keys(al.lang[e]);if(void 0!==al.lang.default){var n=Object.keys(al.lang[al.lang.default]);if(s!==n)for(let t=0;t<n.length;t++)-1==s.indexOf(n[t])&&(al.lang[e][n[t]]=al.lang[al.lang.default][n[t]],s=Object.keys(al.lang[e]))}for(var i=0;i<s.length;i++){var g=al.lang[e][s[i]];al.lang[e][s[i]]=g.replace(/(?<!\\)((?:\\\\)*)\$\{([^}]*)}/g,((e,t,l)=>t+Function('"use strict";return ('+l+")").call())).replace(/(?<!\\)((?:\\\\)*)\{([^}]*)}/g,((t,l,a)=>l+al.lang[e][a.trim()])).replace(/\\((?:\\\\)*)(\{[^}]*})/g,((e,t,l)=>t+l))}if(t!==al.mode.REPLACE){document.querySelectorAll("[al-aplto]").forEach((t=>{let r=t.getAttribute("al-aplto"),s=a(0,r);if(!1!==s[Object.keys(s)[0]]&&void 0!==s[Object.keys(s)[0]])return Object.keys(s).forEach((l=>{al._setAttr(t,l,al.lang[e][s[l]])})),void l()}));for(i=0;i<s.length;i++)document.querySelectorAll('[al="'+s[i]+'"]').forEach((l=>{let r=l.getAttribute("al-aplto");if(null!=r){let t=a(0,r);!1===t[Object.keys(t)[0]]&&al._setAttr(l,Object.keys(t)[0],al.lang[e][s[i]])}else if("input"==l.tagName.toLowerCase())l.value=al.lang[e][s[i]];else switch(t){case al.mode.TEXT:l.innerText=al.lang[e][s[i]];break;default:l.innerHTML=al.lang[e][s[i]]}}));l()}else{document.querySelectorAll("[al-aplto]").forEach((t=>{let l=t.getAttribute("al-aplto"),r=a(0,l);!1!==r[Object.keys(r)[0]]&&void 0!==r[Object.keys(r)[0]]&&Object.keys(r).forEach((l=>{let a=new RegExp(r[l],"gi");al._setAttr(t,l,al._getAttr(t,l).replace(a,al.lang[e][r[l]]))}))}));for(var i=0;i<s.length;i++)document.querySelectorAll("[al]").forEach((t=>{let l=new RegExp(s[i],"gi"),r=t.getAttribute("al-aplto");if(null!=r){let n=a(0,r),g=Object.keys(n)[0];!1===n[g]&&al._setAttr(t,g,al._getAttr(t,g).replace(l,al.lang[e][s[i]])),al._setAttr(t,r,al._getAttr(t,r).replace(l,al.lang[e][s[i]]))}else"input"==t.tagName.toLowerCase()?t.value=t.value.replace(l,al.lang[e][s[i]]):t.innerHTML=t.innerHTML.replace(l,al.lang[e][s[i]])}));l()}},setLangProp(e,t=(()=>{}),l={}){if(e instanceof Array)1==l.url&&"string"==typeof e[0]?this._(e,0,(e=>{al.setLangProp(e,t,l)}),l.yaml):(e.forEach((e=>{al.lang[e.language]=e.data})),t(this.lang));else if("object"==typeof e)void 0===e.default&&(e.default=this.lang.default),this.lang=e,t(this.lang);else if(1==l.yaml)this.setLangProp(jsyaml.load(e),t,l);else if(0==l.yaml)this.setLangProp(JSON.parse(e),t,l);else try{this.setLangProp(jsyaml.load(e),t,l)}catch{this.setLangProp(JSON.parse(e),t,l)}},setDefault(e){this.lang.default=e},setDefaultCountry(e){this.lang.default_country=e},release(){al.lang={},al._p=[]},httpGet(e,t=(()=>{})){var l=new XMLHttpRequest;l.onreadystatechange=()=>{4==this.readyState&&t(this.responseText,this.status)},l.open("GET",e,!0),l.send()},_p:[],_(e,t,l,a){if(t>=e.length)return l(this._p),void(this._p=[]);this.httpGet(e[t],(r=>{if(1==a)al._p.push(jsyaml.load(r));else if(0==a)al._p.push(JSON.parse(r));else try{al._p.push(jsyaml.load(r))}catch{al._p.push(JSON.parse(r))}al._(e,t+1,l,a)}))},_setAttr(e,t,l){e[t]=l,e.setAttribute(t,l)},_getAttr:(e,t)=>void 0!==e[t]?e[t]:e.getAttribute(t),ver:[1506,"1.4.4-es6"],mode:{HTML:0,TEXT:1,TEXT_ALL:2,REPLACE:3},lang:{default:"zh-CN"}};